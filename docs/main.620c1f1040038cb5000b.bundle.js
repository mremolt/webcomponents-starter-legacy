webpackJsonp([3],{"./src/app/backend/routes.selectors.ts":function(e,t,s){"use strict";t.a=function(e){return e.routes.context.params},t.b=function(e){return e.routes.route}},"./src/app/backend/store.ts":function(e,t,s){"use strict";var n=s("./node_modules/redux/es/index.js"),a=s("./node_modules/redux-promise-middleware/dist/es/index.js"),r=s("./node_modules/redux-thunk/lib/index.js"),i=s.n(r),o=s("./src/app/users/backend/users.actions.ts"),c=s("./node_modules/ramda/src/lensPath.js"),l=s.n(c),d=s("./node_modules/ramda/src/set.js"),u=s.n(d),p=s("./node_modules/ramda/src/compose.js"),h=s.n(p);const m={loading:!1,error:null,entities:[]};var b=s("./src/app/constants.ts");const f={loading:!1,error:null,entity:{id:0,firstname:"",lastname:"",email:""}},g={context:null,element:null,route:""},v=Object(n.b)({routes:function(e=g,t){switch(t.type){case b.a:return Object.assign({},e,t.payload,{route:t.payload.context.pathname});case b.b:return Object.assign({},e,{route:t.payload})}return e},users:function(e=m,t){const s=l()(["loading"]),n=l()(["entities"]);switch(t.type){case o.j.pending:return u()(s,!0,m);case o.j.fulfilled:return h()(u()(s,!1),u()(n,t.payload))(e);case o.g.fulfilled:const a=e.entities.filter(e=>e.id!==t.payload);return Object.assign({},e,{entities:a})}return e},currentUser:function(e=f,t){const s=l()(["loading"]),n=l()(["entity"]);switch(t.type){case o.h.pending:return u()(s,!0,f);case o.h.fulfilled:return h()(u()(s,!1),u()(n,t.payload))(e);case o.f.pending:return u()(s,!0,e);case o.f.fulfilled:return h()(u()(s,!1),u()(n,t.payload))(e);case o.i.pending:return u()(s,!0,e);case o.i.fulfilled:return h()(u()(s,!1),u()(n,t.payload))(e)}return e}});let j=[Object(a.a)(),i.a];const y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.c;j=j;const _=Object(n.d)(v,{},y(Object(n.a)(...j)));t.a=_},"./src/app/constants.ts":function(e,t,s){"use strict";t.a="LOCATION_CHANGE",t.b="ROUTE_UPDATE"},"./src/app/header/locale/de.json":function(e,t){e.exports={nav_home:"Startseite",nav_users:"Benutzer",nav_foo:"Foo",nav_disabled:"Deaktiviert",nav_de:"Deutsch",nav_en:"Englisch"}},"./src/app/header/locale/en.json":function(e,t){e.exports={nav_home:"Home",nav_users:"Users",nav_foo:"Foo",nav_disabled:"Disabled",nav_de:"German",nav_en:"English"}},"./src/app/locale/de.json":function(e,t){e.exports={}},"./src/app/locale/en.json":function(e,t){e.exports={}},"./src/app/locale/errors.de.json":function(e,t){e.exports={valueMissing:"Pflichtfeld",invalidFirstName:"Der Vorname muss entweder Ford lauten oder mindestens 6 Zeichen lang sein",invalidAero:"Die Domäne muss .aero lauten",typeMismatch:"Das ist kein gültiger Wert für dieses Feld.",tooShort:"zu kurz"}},"./src/app/locale/errors.en.json":function(e,t){e.exports={valueMissing:"Required field",invalidFirstName:"The firstname must either be Ford or contain at least 6 chars",invalidAero:"the Domain mus be .aero",typeMismatch:"The value in invalid for thie field type",tooShort:"too short"}},"./src/app/translator.ts":function(e,t,s){"use strict";var n=s("./node_modules/string-template/compile.js"),a=s.n(n);class r{constructor(e={}){this.settings=e,this.translations={},this.callbacks=[];const t=this.settings.translations||{};Object.keys(t).forEach(e=>{this.addTranslation(e,t[e])})}get defaultLocale(){return this.settings.defaultLocale||navigator.language}get locale(){return this.settings.locale||localStorage.getItem("app:currentLocale")||this.defaultLocale}set locale(e){if(!this.translations[e])throw new TypeError(`Locale ${e} has no translations!`);this.settings.locale!==e&&(this.settings.locale=e,localStorage.setItem("app:currentLocale",e),this.callbacks.forEach(t=>{t(e)}))}addTranslation(e,t,s){const n=Object.keys(t).reduce((e,n)=>{const r=s?`${s}:${n}`:n;return Object.assign({},e,{[r]:a()(t[n])})},{});this.translations[e]=Object.assign({},this.translations[e],n)}translate(e,t){try{return this.translations[this.locale][e](t)}catch(t){return`[Translation Missing: ${this.locale} - ${e}]`}}t(e,t){return this.translate(e,t)}onLocaleChange(e){this.callbacks.push(e)}}t.a=function(e,t){return i.t(e,t)};const i=new r;t.b=i},"./src/app/users/backend/users.actions.ts":function(e,t,s){"use strict";function n(e){if(e.ok)return e.json();throw e}function a(e,t={}){return fetch(e,t).then(n)}function r(e,t,s={}){const a=s.headers||new Headers;return a.append("Content-Type","application/json"),s=Object.assign({},s,{method:"POST",body:JSON.stringify(t),headers:a}),fetch(e,s).then(n)}function i(e,t,s={}){const a=s.headers||new Headers;return a.append("Content-Type","application/json"),s=Object.assign({},s,{method:"PUT",body:JSON.stringify(t),headers:a}),fetch(e,s).then(n)}function o(e,t={}){return t=Object.assign({},t,{method:"DELETE"}),fetch(e,t).then(n)}function c(e){return{base:e,pending:`${e}_PENDING`,fulfilled:`${e}_FULFILLED`,rejected:`${e}_REJECTED`}}class l{constructor(){this.apiUrl="http://localhost:3001",this.throwOnSchemaError=!0,this.autoUpdate="confirm",this.updateMessage="Updates available, reload page now?",this.pageTitle="Webcomponents Starter",this.base="/",this.additionalEnhancers=[]}}const d=new l;var u=s("./src/app/constants.ts");t.d=function(){return{type:h.base,payload:a(p)}},t.c=function(e){return{type:m.base,payload:fetch(`${p}/${e}`).then(e=>e.json())}},t.a=function(e){return t=>{const s=r(p,e);t({type:b.base,payload:r(p,e)}),s.then(()=>{t({type:u.b,payload:"/users"})})}},t.e=function(e){return{type:f.base,payload:i(`${p}/${e.id}`,e)}},t.b=function(e){return{type:g.base,payload:o(`${p}/${e}`).then(()=>e)}};const p=`${d.apiUrl}/users`,h=c("USERS_FETCH");t.j=h;const m=c("USER_FETCH");t.h=m;const b=c("USER_CREATE");t.f=b;const f=c("USER_UPDATE");t.i=f;const g=c("USER_DELETE");t.g=g},"./src/app/utils/decorators.ts":function(e,t,s){"use strict";t.a=function(){return(e,t)=>({get(){return this["_"+t]},set(e){this["_"+t]!==e&&(this["_"+t]=e,this.updateView())}})}},"./src/app/utils/template.mixin.ts":function(e,t,s){"use strict";t.a=function(e){return class extends e{constructor(){super(),this.needsRender=!0}connectedCallback(){this.updateView()}render(){return n["a"]``}async updateView(){this.needsRender&&(this.needsRender=!1,await 0,this.needsRender=!0,Object(n.b)(this.render(),this))}}};var n=s("./node_modules/lit-html/lib/lit-extended.js")},"./src/main.ts":function(e,t,s){"use strict";function n(e,t,s){s.dispatch({type:i.a,payload:{element:e,context:t}})}function a(e){e.subscribe(()=>{const t=Object(o.b)(e.getState());setTimeout(()=>{t!==window.location.pathname&&r.redirect(t)})})}Object.defineProperty(t,"__esModule",{value:!0}),s("./node_modules/@webcomponents/custom-elements/custom-elements.min.js");var r=s("./node_modules/page/index.js"),i=s("./src/app/constants.ts"),o=s("./src/app/backend/routes.selectors.ts"),c=s("./src/app/backend/store.ts"),l=s("./src/app/translator.ts"),d=s("./src/app/locale/de.json"),u=s.n(d),p=s("./src/app/locale/en.json"),h=s.n(p),m=s("./src/app/locale/errors.de.json"),b=s.n(m),f=s("./src/app/locale/errors.en.json"),g=s.n(f);l.b.addTranslation("de",u.a),l.b.addTranslation("en",h.a),l.b.addTranslation("de",b.a,"errors"),l.b.addTranslation("en",g.a,"errors");var v=s("./node_modules/tslib/tslib.es6.js"),j=s("./node_modules/lit-html/lib/lit-extended.js"),y=s("./src/app/utils/template.mixin.ts"),_=s("./src/app/utils/decorators.ts"),E=s("./src/app/header/locale/de.json"),w=s.n(E),O=s("./src/app/header/locale/en.json"),T=s.n(O);class x extends(Object(y.a)(HTMLElement)){switchLanguage(e,t){e.preventDefault(),l.b.locale=t,this.updateView()}render(){return j["a"]`
      <div class="row">
        <div class="col-sm">
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link active" href="/">${Object(l.a)("header:nav_home")}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/users">${Object(l.a)("header:nav_users")}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/foo/marc">${Object(l.a)("header:nav_foo")}</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#">${Object(l.a)("header:nav_disabled")}</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="#"
                on-click="${e=>this.switchLanguage(e,"de")}">
                ${Object(l.a)("header:nav_de")}
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="#"
                on-click="${e=>this.switchLanguage(e,"en")}">
                ${Object(l.a)("header:nav_en")}
              </a>
            </li>
          </ul>

        </div>
      </div>
    `}}customElements.define("my-header",x),l.b.addTranslation("de",w.a,"header"),l.b.addTranslation("en",T.a,"header");class k extends(Object(y.a)(HTMLElement)){connectedCallback(){this.page=document.createElement("div"),c.a.subscribe(()=>{const e=c.a.getState().routes.element;e&&this.page.constructor!==e&&(this.page=new e)}),l.b.onLocaleChange(()=>{this.updateView()}),a(c.a)}render(){return j["a"]`
      <div class="container">
        <my-header></my-header>
        <div id="content">${this.page}</div>
      </div>
    `}}v.a([Object(_.a)(),v.b("design:type",HTMLElement)],k.prototype,"page",void 0),customElements.define("my-app",k),function(e){r.base("/"),r("/",async t=>{n((await s.e(1).then(s.bind(null,"./src/app/home/index.ts"))).HomePageElement,t,e)}),r("users",async t=>{n((await s.e(0).then(s.bind(null,"./src/app/users/index.ts"))).UsersPageElement,t,e)}),r("users/new",async t=>{n((await s.e(0).then(s.bind(null,"./src/app/users/index.ts"))).UserNewPageElement,t,e)}),r("users/:id",async t=>{n((await s.e(0).then(s.bind(null,"./src/app/users/index.ts"))).UserDetailPageElement,t,e)}),r("users/:id/edit",async t=>{n((await s.e(0).then(s.bind(null,"./src/app/users/index.ts"))).UserEditPageElement,t,e)}),r("foo/:bar",async t=>{n((await s.e(2).then(s.bind(null,"./src/app/pages/foo-bar.element.ts"))).FooBarElement,t,e)}),r()}(c.a)}},["./src/main.ts"]);
//# sourceMappingURL=main.620c1f1040038cb5000b.bundle.js.map